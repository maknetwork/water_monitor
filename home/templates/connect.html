{% extends "base.html" %}
{%block selected2%}active{%endblock%}
{% load static %}

{% block content %}
  <link href="{% static "assets/css/components/custom-list-group.css" %}" rel="stylesheet" type="text/css">
<  <div id="content" class="main-content">
            <div class="container">

                <div class="container">


                    <div class="row layout-spacing layout-top-spacing" id="cancel-row">



                        <div id="listGroupImages" class="col-lg-12 layout-spacing">
                            <div class="statbox widget box box-shadow" id="blockit">
                                <div class="widget-header">
                                    <div class="row" id="updated">
                                                                           <div class="col-xl-12 col-md-12 col-sm-12 col-12">

  <div class="col-xl-12 col-md-12 col-sm-12 col-12">
    <h4>Devices found on network </h4>
    {% if messages %}
    {% for message in messages %}
    {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
       <div class="alert alert-danger mb-4" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x close" data-dismiss="alert"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button> <strong>Alert! </strong>{{ message }}</div>
    {%else%}
    <div class="alert alert-success mb-4" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x close" data-dismiss="alert"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button><strong>Success! </strong> {{ message }}</div>
       {% endif %}
       {% endfor %}
    {% endif %}
    <div class="text-center">
      <button class="btn btn-warning mb-2 mr-2 btn-rounded" id="button1" type="button">Scan for devices <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg></button>

                                        </div>
                                        </div>

                                    </div>
                                </div><div  id="update">

                            </div>
                            </div>
                        </div>




                    </div><div id="listGroupImages" class="col-lg-12 layout-spacing">
                        <div class="statbox widget box box-shadow" id="blockit">
                            <div class="widget-header">
                                <div class="row" id="updated">
                                                                       <div class="col-xl-12 col-md-12 col-sm-12 col-12">

<div class="col-xl-12 col-md-12 col-sm-12 col-12">
<h4>Connect a device manually</h4>
{% if messages %}
{% for message in messages %}
{% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
   <div class="alert alert-danger mb-4" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x close" data-dismiss="alert"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button> <strong>Alert! </strong>{{ message }}</div>
{%else%}
<div class="alert alert-success mb-4" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x close" data-dismiss="alert"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button><strong>Success! </strong> {{ message }}</div>
   {% endif %}
   {% endfor %}
{% endif %}
<div class="col-lg-6 col-12 mx-auto">
                                         <form method="post" action="/save_manually">
                                             <div class="form-group">
                                                 <p>IP Address</p> {% csrf_token %}
                                                 <label for="url-text" class="sr-only">Url</label>
                                                 <input id="url-text" type="text" name="ip_address" placeholder="192.168.0.100" class="form-control" required>
                                                 <input type="submit" name="url" class="mt-4 btn btn-primary">
                                             </div>
                                         </form>
                                     </div>
<div class="text-center">


                                    </div>
                                    </div>

                                </div>
                            </div><div  id="update">

                        </div>
                        </div>
                    </div>




                </div>

                </div>

            </div>


          </div>


{%endblock%}
{%block footer%}
<script src="{% static "plugins/blockui/jquery.blockUI.min.js" %}"></script>

<script src="{% static "plugins/blockui/custom-blockui.js" %}"></script>
<script>
  $("#button1").click( function()
             {
               var block = $('#blockit');

               $(block).block({
            message: '<svg> ... </svg>',
            fadeIn: 800,
            timeout: 0, //unblock after 2 seconds
            overlayCSS: {
                backgroundColor: '#1b2024',
                opacity: 0.8,
                zIndex: 1200,
                cursor: 'wait'
            },
            css: {
                border: 0,
                color: '#fff',
                zIndex: 1201,
                padding: 0,
                backgroundColor: 'transparent'
            },
            onBlock: function() { $.ajax({
               url: "/getdevices",
                success : function(data) {

        $('#update').replaceWith(data);
        setTimeout($(block).unblock(), 1);
     }
               });
            }
        });
        });
 </script> {%endblock%}
